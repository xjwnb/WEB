# Canvas 图形

创建 <canvas> 元素时至少要设置 width 和 height 属性。

```html
<canvas id="xkcCanvas" width="700" height="700">小卡车 CANVAS</canvas>
```

**注意**：如果发现在编写 canvas 的时候，发现没有 API 提示的话，需要在 JavaScript 代码之前写下以下代码即可。

```javascript
/** @type {HTMLCanvasElement}*/
```

## 基本画布功能

在画布上绘制图形，首先要先取得绘图上下文。使用 `getContext()` 方法可以获得对绘图上下文的引用。需要给这个方法传入参数 "2d"，表示获取 2D 上下文对象

```javascript
let xkcCanvas = document.getElementById("xkcCanvas");
if (xkcCanvas.getContext) {
  let context = xkcCanvas.getContext("2d");
}
```

使用 `toDataURL()` 方法导出 <canvas> 元素上的图像。接收一个参数：要生成图像的 MIME 类型。

```javascript
let imgURI = xkcCanvas.toDataURL("image/png");
```

## 2D 绘图上下文

### 填充和描边

2D 上下文有两个基本绘制操作：填充和描边。填充以指定样式（颜色、渐变、图像）自动填充形状，而描边只为图形边界着色。显示效果取决于两个属性：`fillStyle` 和 `strokeStyle`。

两个属性可以是字符串、渐变对象或图案对象。

```javascript
context.strokeStyle = "blue";
context.fillStyle = "#00ff00";
```

### 绘制矩形

2D 绘图上下文可以绘制的形状只有矩形。与绘制矩形相关的方法有 3 个：`fillRect()` 、`strokeRect()` 和 `clearRect()` 。都接收 4 个参数：矩形 x 坐标、矩形 y 坐标、矩形宽度和矩形高度。

- `fillRect()` 方法用于以指定颜色在画布上绘制并填充矩形。填充颜色使用 `fillStyle` 属性设置。

  ```javascript
  // 填充一个在canvas 元素中 x 为20像素，y 为20像素，宽高为100像素的原谅色的矩形
  context.fillStyle = "green";
  context.fillRect(20, 20, 100, 100);
  
  // 绘制透明矩形
  context.fillStyle = "rgba(0, 255, 0, 0.5)";
  context.fillRect(130, 20, 100, 100);
  ```

- `strokeRect()` 方法使用 `strokeStyle` 属性指定的颜色绘制矩形轮廓。

  ```javascript
  // 绘制矩形轮廓
  context.strokeStyle = "blue";
  context.strokeRect(10, 10, 50, 50);
  // 绘制透明矩形轮廓
  context.strokeStyle = "rgba(0, 0, 255, 0.5)";
  context.strokeRect(10, 100, 50, 50);
  ```

- `clearRect()` 方法可以擦除画布中某个区域。用于将绘图上下文某个区域便透明。

  ```javascript
  // 清除矩形
  context.fillStyle = "#353b48";
  context.fillRect(250, 10, 100, 100);
  context.clearRect(275, 35, 50, 50);
  ```

  